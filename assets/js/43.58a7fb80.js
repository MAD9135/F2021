(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{422:function(e,t,s){"use strict";s.r(t);var a=s(26),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("PageHeader"),e._v(" "),s("h2",{attrs:{id:"create-react-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-react-app"}},[e._v("#")]),e._v(" Create React App")]),e._v(" "),s("p",[e._v("If you are using Create React App 4 (released October 2020), creating a PWA with React just go a little easier. One of the biggest changes is that you can use the Workbox "),s("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-webpack-plugin.InjectManifest",target:"_blank",rel:"noopener noreferrer"}},[e._v("InjectManifest"),s("OutboundLink")],1),e._v(" plugin for Webpack to automatically inject your Webpack managed assets into the service-worker's "),s("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/guides/precache-files",target:"_blank",rel:"noopener noreferrer"}},[e._v("precache"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("It also provides a starter "),s("code",[e._v("service-worker.js")]),e._v(" module and the registration functions.")]),e._v(" "),s("p",[e._v("To get all of this well thought out, automated goodness, you need to use the "),s("code",[e._v("--template")]),e._v(" flag with CRA.")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("npx create-react-app my-app --template cra-template-pwa\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h3",{attrs:{id:"enable-the-service-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enable-the-service-worker"}},[e._v("#")]),e._v(" Enable the service worker")]),e._v(" "),s("p",[e._v("And then in the project's main "),s("code",[e._v("index.js")]),e._v(" module, look for this comment block ...")]),e._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// If you want your app to work offline and load faster, you can change")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// unregister() to register() below. Note this comes with some pitfalls.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Learn more about service workers: https://cra.link/PWA")]),e._v("\nserviceWorkerRegistration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("unregister")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("p",[e._v("Notice that the service worker is not enabled by default. Update to opt-in to using the service worker.")]),e._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("serviceWorkerRegistration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h3",{attrs:{id:"update-the-pwa-manifest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update-the-pwa-manifest"}},[e._v("#")]),e._v(" Update the PWA Manifest")]),e._v(" "),s("p",[e._v("A default progressive web app manifest is provided at "),s("code",[e._v("public/manifest.json")]),e._v(". You will need to customize it with your correct app meta data: name, icons, theme colour, etc. See Google's "),s("a",{attrs:{href:"https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Web App Manifest Guide"),s("OutboundLink")],1),e._v(" for details on all of the options.")]),e._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"short_name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"React App"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Create React App Sample"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"icons"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"src"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"favicon.ico"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"sizes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"64x64 32x32 24x24 16x16"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"image/x-icon"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"src"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"logo192.png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"image/png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"sizes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"192x192"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"src"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"logo512.png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"image/png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"sizes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"512x512"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"start_url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"display"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"standalone"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"theme_color"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"#000000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"background_color"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"#ffffff"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("CRA Official Docs")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Making a Progressive Web App"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"practice-exercises"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#practice-exercises"}},[e._v("#")]),e._v(" Practice Exercises")]),e._v(" "),s("h3",{attrs:{id:"basic-setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic-setup"}},[e._v("#")]),e._v(" Basic setup")]),e._v(" "),s("ol",[s("li",[e._v("Create a new React project using "),s("code",[e._v("create-react-app")]),e._v(" and the PWA template.")]),e._v(" "),s("li",[e._v("Update the manifest file to change the "),s("code",[e._v("Name")]),e._v(" to be your name and the "),s("code",[e._v("Short name")]),e._v(" to be your Algonquin user id.")]),e._v(" "),s("li",[e._v("Enable to service worker")]),e._v(" "),s("li",[e._v("Create a production build of the project with "),s("code",[e._v("yarn build")])]),e._v(" "),s("li",[s("code",[e._v("cd")]),e._v(" into the "),s("code",[e._v("build")]),e._v(" folder and run a node web server: "),s("code",[e._v("npx serve")])]),e._v(" "),s("li",[e._v("Open the app in a new Incognito browser window.")]),e._v(" "),s("li",[e._v("Open the "),s("code",[e._v("Network")]),e._v(" tab in Chrome DevTools. Disable the cache and simulate "),s("code",[e._v("offline")]),e._v(" status. Now try to reload the browser - it should still work.")]),e._v(" "),s("li",[e._v("Run the lighthouse report in Chrome DevTools. Inspect the report.")]),e._v(" "),s("li",[e._v("Open the "),s("code",[e._v("Application")]),e._v(" tab in Chrome DevTools. Review the "),s("code",[e._v("Manifest")]),e._v(" and "),s("code",[e._v("Service Worker")]),e._v(" information.")]),e._v(" "),s("li",[e._v("Take a screenshot of the "),s("code",[e._v("Manifest")]),e._v(" details in DevTools showing the "),s("code",[e._v("Identity")]),e._v(" section and post that to our class Slack channel.")])]),e._v(" "),s("h3",{attrs:{id:"add-routing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-routing"}},[e._v("#")]),e._v(" Add routing")]),e._v(" "),s("ol",{attrs:{start:"11"}},[s("li",[e._v("Add "),s("code",[e._v("react-router")]),e._v(" to your project.")]),e._v(" "),s("li",[e._v("Create a simple navigation with three pages.")]),e._v(" "),s("li",[e._v("Add a CSS file for each page to apply some unique styling for each of the three pages.")]),e._v(" "),s("li",[e._v("Build and test your application in offline mode.")])]),e._v(" "),s("h3",{attrs:{id:"customize-the-service-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#customize-the-service-worker"}},[e._v("#")]),e._v(" Customize the service worker")]),e._v(" "),s("ol",{attrs:{start:"15"}},[s("li",[e._v("Add an image file (jpeg or png) to each of the three pages. Store the images in the "),s("code",[e._v("public/img")]),e._v(" folder.")]),e._v(" "),s("li",[e._v("Build and test your application in offline mode. Do you see the images?")]),e._v(" "),s("li",[e._v("Modify "),s("code",[e._v("service-worker.js")]),e._v(" to add "),s("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/guides/get-started",target:"_blank",rel:"noopener noreferrer"}},[e._v("Workbox"),s("OutboundLink")],1),e._v(" modules to cache the image assets.")]),e._v(" "),s("li",[e._v("Build and test your application in offline mode. Do you see the images?")])]),e._v(" "),s("h3",{attrs:{id:"bonus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bonus"}},[e._v("#")]),e._v(" BONUS")]),e._v(" "),s("ol",{attrs:{start:"19"}},[s("li",[e._v("Research how you can use "),s("code",[e._v("React.lazy")]),e._v(" and "),s("code",[e._v("React.Suspense")]),e._v(" to trigger code-splitting.")]),e._v(" "),s("li",[e._v("Test to see if it still works in offline mode.")])])],1)}),[],!1,null,null,null);t.default=r.exports}}]);